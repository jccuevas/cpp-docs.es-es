---
title: CMFCToolBarMenuButton (clase) | Microsoft Docs
ms.custom: ''
ms.date: 11/04/2016
ms.technology:
- cpp-mfc
ms.topic: reference
f1_keywords:
- CMFCToolBarMenuButton
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CMFCToolBarMenuButton
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CompareWith
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CopyFrom
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CreateFromMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CreateMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CreatePopupMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::EnableQuickCustomize
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::GetCommands
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::GetImageRect
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::GetPaletteRows
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::GetPopupMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::HasButton
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::HaveHotBorder
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsBorder
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsClickedOnMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsDroppedDown
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsEmptyMenuAllowed
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsExclusive
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsMenuPaletteMode
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsQuickMode
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsTearOffMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnAfterCreatePopupMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnBeforeDrag
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnCalculateSize
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnCancelMode
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnChangeParentWnd
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnClick
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnClickMenuItem
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnContextHelp
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnDraw
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnDrawOnCustomizeList
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OpenPopupMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::ResetImageToDefault
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SaveBarState
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::Serialize
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetACCData
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetMenuOnly
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetMenuPaletteMode
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetMessageWnd
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetRadio
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetTearOff
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::DrawDocumentIcon
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::m_bAlwaysCallOwnerDraw
dev_langs:
- C++
helpviewer_keywords:
- CMFCToolBarMenuButton [MFC], CMFCToolBarMenuButton
- CMFCToolBarMenuButton [MFC], CompareWith
- CMFCToolBarMenuButton [MFC], CopyFrom
- CMFCToolBarMenuButton [MFC], CreateFromMenu
- CMFCToolBarMenuButton [MFC], CreateMenu
- CMFCToolBarMenuButton [MFC], CreatePopupMenu
- CMFCToolBarMenuButton [MFC], EnableQuickCustomize
- CMFCToolBarMenuButton [MFC], GetCommands
- CMFCToolBarMenuButton [MFC], GetImageRect
- CMFCToolBarMenuButton [MFC], GetPaletteRows
- CMFCToolBarMenuButton [MFC], GetPopupMenu
- CMFCToolBarMenuButton [MFC], HasButton
- CMFCToolBarMenuButton [MFC], HaveHotBorder
- CMFCToolBarMenuButton [MFC], IsBorder
- CMFCToolBarMenuButton [MFC], IsClickedOnMenu
- CMFCToolBarMenuButton [MFC], IsDroppedDown
- CMFCToolBarMenuButton [MFC], IsEmptyMenuAllowed
- CMFCToolBarMenuButton [MFC], IsExclusive
- CMFCToolBarMenuButton [MFC], IsMenuPaletteMode
- CMFCToolBarMenuButton [MFC], IsQuickMode
- CMFCToolBarMenuButton [MFC], IsTearOffMenu
- CMFCToolBarMenuButton [MFC], OnAfterCreatePopupMenu
- CMFCToolBarMenuButton [MFC], OnBeforeDrag
- CMFCToolBarMenuButton [MFC], OnCalculateSize
- CMFCToolBarMenuButton [MFC], OnCancelMode
- CMFCToolBarMenuButton [MFC], OnChangeParentWnd
- CMFCToolBarMenuButton [MFC], OnClick
- CMFCToolBarMenuButton [MFC], OnClickMenuItem
- CMFCToolBarMenuButton [MFC], OnContextHelp
- CMFCToolBarMenuButton [MFC], OnDraw
- CMFCToolBarMenuButton [MFC], OnDrawOnCustomizeList
- CMFCToolBarMenuButton [MFC], OpenPopupMenu
- CMFCToolBarMenuButton [MFC], ResetImageToDefault
- CMFCToolBarMenuButton [MFC], SaveBarState
- CMFCToolBarMenuButton [MFC], Serialize
- CMFCToolBarMenuButton [MFC], SetACCData
- CMFCToolBarMenuButton [MFC], SetMenuOnly
- CMFCToolBarMenuButton [MFC], SetMenuPaletteMode
- CMFCToolBarMenuButton [MFC], SetMessageWnd
- CMFCToolBarMenuButton [MFC], SetRadio
- CMFCToolBarMenuButton [MFC], SetTearOff
- CMFCToolBarMenuButton [MFC], DrawDocumentIcon
- CMFCToolBarMenuButton [MFC], m_bAlwaysCallOwnerDraw
ms.assetid: cfa50176-7e4b-4527-9904-86a1b48fc1bc
author: mikeblome
ms.author: mblome
ms.workload:
- cplusplus
ms.openlocfilehash: 9f4dffd2fe57e38855033d192ddaf9ac9752e201
ms.sourcegitcommit: 799f9b976623a375203ad8b2ad5147bd6a2212f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/19/2018
ms.locfileid: "46404914"
---
# <a name="cmfctoolbarmenubutton-class"></a>CMFCToolBarMenuButton (clase)

Un botón de la barra de herramientas que contiene un menú emergente.
Para obtener más información, vea el código fuente ubicado en el **VC\\atlmfc\\src\\mfc** carpeta de la instalación de Visual Studio.

## <a name="syntax"></a>Sintaxis

```
class CMFCToolBarMenuButton : public CMFCToolBarButton
```

## <a name="members"></a>Miembros

### <a name="public-constructors"></a>Constructores públicos

|Name|Descripción|
|----------|-----------------|
|[CMFCToolBarMenuButton::CMFCToolBarMenuButton](#cmfctoolbarmenubutton)|Construye un objeto `CMFCToolBarMenuButton`.|

### <a name="public-methods"></a>Métodos públicos

|Name|Descripción|
|----------|-----------------|
|[CMFCToolBarMenuButton::CompareWith](#comparewith)|Compara esta instancia con el proporcionado `CMFCToolBarButton` objeto. (Invalida [CMFCToolBarButton::CompareWith](../../mfc/reference/cmfctoolbarbutton-class.md#comparewith).)|
|[Cmfctoolbarmenubutton:: CopyFrom](#copyfrom)|Copia las propiedades de otro botón de barra de herramientas a la actual. (Invalida [CMFCToolBarButton::CopyFrom](../../mfc/reference/cmfctoolbarbutton-class.md#copyfrom).)|
|[CMFCToolBarMenuButton::CreateFromMenu](#createfrommenu)|Inicializa el menú de barra de herramientas desde un identificador de menú de Windows.|
|[CMFCToolBarMenuButton::CreateMenu](#createmenu)|Crea un menú de Windows que consta de los comandos en el menú de barra de herramientas. Devuelve un identificador para el menú de Windows.|
|[Cmfctoolbarmenubutton:: CreatePopupMenu](#createpopupmenu)|Crea un objeto de menú emergente ( [CMFCPopupMenu (clase)](../../mfc/reference/cmfcpopupmenu-class.md)) para mostrar el menú de barra de herramientas.|
|[CMFCToolBarMenuButton::EnableQuickCustomize](#enablequickcustomize)||
|[CMFCToolBarMenuButton::GetCommands](#getcommands)|Proporciona acceso de solo lectura a la lista de comandos en el menú de barra de herramientas.|
|[CMFCToolBarMenuButton::GetImageRect](#getimagerect)|Recupera el rectángulo delimitador de la imagen del botón.|
|[CMFCToolBarMenuButton::GetPaletteRows](#getpaletterows)|Devuelve el número de filas en el menú emergente cuando el menú está en modo de paleta.|
|[CMFCToolBarMenuButton::GetPopupMenu](#getpopupmenu)|Devuelve un puntero al objeto de menú emergente que está asociado con el botón.|
|[CMFCToolBarMenuButton::HasButton](#hasbutton)||
|[CMFCToolBarMenuButton::HaveHotBorder](#havehotborder)|Determina si se muestra un borde del botón cuando un usuario selecciona el botón. (Invalida [CMFCToolBarButton::HaveHotBorder](../../mfc/reference/cmfctoolbarbutton-class.md#havehotborder).)|
|[CMFCToolBarMenuButton::IsBorder](#isborder)||
|[CMFCToolBarMenuButton::IsClickedOnMenu](#isclickedonmenu)||
|[CMFCToolBarMenuButton::IsDroppedDown](#isdroppeddown)|Determina si se muestra el menú emergente.|
|[Cmfctoolbarmenubutton:: Isemptymenuallowed](#isemptymenuallowed)|Lo llama el marco de trabajo para determinar si un usuario puede abrir un submenú de elemento de menú seleccionado.|
|[CMFCToolBarMenuButton::IsExclusive](#isexclusive)|Determina si el botón está en modo exclusivo, es decir, si mantiene abierto el menú emergente incluso cuando el usuario mueve el puntero sobre otra barra de herramientas o botón.|
|[CMFCToolBarMenuButton::IsMenuPaletteMode](#ismenupalettemode)|Determina si el menú emergente está en modo de paleta.|
|[CMFCToolBarMenuButton::IsQuickMode](#isquickmode)||
|[CMFCToolBarMenuButton::IsTearOffMenu](#istearoffmenu)|Determina si el menú emergente tiene una barra desplazable.|
|[CMFCToolBarMenuButton::OnAfterCreatePopupMenu](#onaftercreatepopupmenu)||
|[CMFCToolBarMenuButton::OnBeforeDrag](#onbeforedrag)|Especifica si se puede arrastrar el botón. (Invalida [CMFCToolBarButton::OnBeforeDrag](../../mfc/reference/cmfctoolbarbutton-class.md#onbeforedrag).)|
|[CMFCToolBarMenuButton::OnCalculateSize](#oncalculatesize)|Lo llama el marco de trabajo para calcular el tamaño del botón para el contexto de dispositivo especificado y el estado de acoplamiento. (Invalida [CMFCToolBarButton::OnCalculateSize](../../mfc/reference/cmfctoolbarbutton-class.md#oncalculatesize).)|
|[CMFCToolBarMenuButton::OnCancelMode](#oncancelmode)|Lo llama el marco de trabajo para controlar la [WM_CANCELMODE](/windows/desktop/winmsg/wm-cancelmode) mensaje. (Invalida [CMFCToolBarButton::OnCancelMode](../../mfc/reference/cmfctoolbarbutton-class.md#oncancelmode).)|
|[CMFCToolBarMenuButton::OnChangeParentWnd](#onchangeparentwnd)|Lo llama el marco cuando el botón se inserta en una nueva barra de herramientas. (Invalida [CMFCToolBarButton::OnChangeParentWnd](cmfctoolbarbutton-class.md#onchangeparentwnd).)|
|[CMFCToolBarMenuButton::OnClick](#onclick)|Lo llama el marco cuando el usuario hace clic en el botón del mouse. (Invalida [CMFCToolBarButton::OnClick](../../mfc/reference/cmfctoolbarbutton-class.md#onclick).)|
|[CMFCToolBarMenuButton::OnClickMenuItem](#onclickmenuitem)|Lo llama el marco cuando el usuario selecciona un elemento en el menú emergente.|
|[CMFCToolBarMenuButton::OnContextHelp](#oncontexthelp)|Lo llama el marco de trabajo cuando la barra de herramientas primario controla un mensaje WM_HELPHITTEST. (Invalida [CMFCToolBarButton::OnContextHelp](../../mfc/reference/cmfctoolbarbutton-class.md#oncontexthelp).)|
|[CMFCToolBarMenuButton::OnDraw](#ondraw)|Lo llama el marco de trabajo para dibujar el botón mediante el uso de las opciones y estilos especificados. (Invalida [CMFCToolBarButton::OnDraw](../../mfc/reference/cmfctoolbarbutton-class.md#ondraw).)|
|[CMFCToolBarMenuButton::OnDrawOnCustomizeList](#ondrawoncustomizelist)|Lo llama el marco de trabajo para dibujar el botón de la **comandos** panel de la **personalizar** cuadro de diálogo. (Invalida [CMFCToolBarButton::OnDrawOnCustomizeList](../../mfc/reference/cmfctoolbarbutton-class.md#ondrawoncustomizelist).)|
|[CMFCToolBarMenuButton::OpenPopupMenu](#openpopupmenu)|Lo llama el marco cuando el usuario abre el menú emergente.|
|[CMFCToolBarMenuButton::ResetImageToDefault](#resetimagetodefault)|En el valor predeterminado se establece la imagen que está asociada con el botón. (Invalida [CMFCToolBarButton::ResetImageToDefault](../../mfc/reference/cmfctoolbarbutton-class.md#resetimagetodefault).)|
|[CMFCToolBarMenuButton::SaveBarState](#savebarstate)|Guarda el estado del botón de barra de herramientas. (Invalida [CMFCToolBarButton::SaveBarState](../../mfc/reference/cmfctoolbarbutton-class.md#savebarstate).)|
|[CMFCToolBarMenuButton::Serialize](#serialize)|Lee este objeto de un archivo o lo escribe en un archivo. (Invalida [CMFCToolBarButton::Serialize](../../mfc/reference/cmfctoolbarbutton-class.md#serialize).)|
|[CMFCToolBarMenuButton::SetACCData](#setaccdata)|Rellena proporcionado `CAccessibilityData` objeto con datos de accesibilidad en el botón de barra de herramientas. (Invalida [CMFCToolBarButton::SetACCData](../../mfc/reference/cmfctoolbarbutton-class.md#setaccdata).)|
|[CMFCToolBarMenuButton::SetMenuOnly](#setmenuonly)|Especifica si el botón se puede agregar a una barra de herramientas.|
|[CMFCToolBarMenuButton::SetMenuPaletteMode](#setmenupalettemode)|Especifica si el menú emergente está en modo de paleta.|
|[CMFCToolBarMenuButton::SetMessageWnd](#setmessagewnd)||
|[CMFCToolBarMenuButton::SetRadio](#setradio)|Fuerza el botón de menú de la barra de herramientas para mostrar un icono que indica que está seleccionada.|
|[CMFCToolBarMenuButton::SetTearOff](#settearoff)|Especifica un desplazable Id. de la barra del menú emergente.|

### <a name="protected-methods"></a>Métodos protegidos

|Name|Descripción|
|----------|-----------------|
|[CMFCToolBarMenuButton::DrawDocumentIcon](#drawdocumenticon)|Dibuja un icono en el botón de menú.|

### <a name="data-members"></a>Miembros de datos

|nombre|Descripción|
|----------|-----------------|
|[CMFCToolBarMenuButton::m_bAlwaysCallOwnerDraw](#m_balwayscallownerdraw)|Si es TRUE, siempre se llama el marco de trabajo [CFrameWndEx::OnDrawMenuImage](../../mfc/reference/cframewndex-class.md#ondrawmenuimage) cuando se dibuja un botón.|

## <a name="remarks"></a>Comentarios

Un `CMFCToolBarMenuButton` puede aparecer como un menú, un elemento de menú que tiene un submenú, un botón que ejecuta un comando o muestra un menú o un botón que muestra sólo un menú. Determinar el comportamiento y apariencia del botón de menú mediante la especificación de parámetros como la imagen, texto, identificador de menú y el identificador asociado con el botón en el constructor del comando `CMFCToolbarMenuButton::CMFCToolbarMenuButton`.

Una clase personalizada derivada de la `CMFCToolbarMenuButton` clase debe usar el [DECLARE_SERIAL](run-time-object-model-services.md#declare_serial) macro. El [DECLARE_DYNCREATE](run-time-object-model-services.md#declare_dyncreate) macro genera un error cuando se cierra la aplicación.

## <a name="example"></a>Ejemplo

En el ejemplo siguiente se muestra cómo configurar un `CMFCToolBarMenuButton` objeto. El código muestra cómo especificar que el menú desplegable está en modo de paleta y especificar el identificador de la barra desplazable que se crea cuando el usuario arrastra el botón de menú fuera de una barra de menús. Este fragmento de código forma parte del [ejemplo de WordPad](../../visual-cpp-samples.md).

[!code-cpp[NVC_MFC_WordPad#10](../../mfc/reference/codesnippet/cpp/cmfctoolbarmenubutton-class_1.cpp)]

## <a name="inheritance-hierarchy"></a>Jerarquía de herencia

[CObject](cobject-class.md)

[CMFCToolBarButton](../../mfc/reference/cmfctoolbarbutton-class.md)

[CMFCToolBarMenuButton](../../mfc/reference/cmfctoolbarmenubutton-class.md)

## <a name="requirements"></a>Requisitos

**Encabezado:** afxtoolbarmenubutton.h

##  <a name="cmfctoolbarmenubutton"></a>  CMFCToolBarMenuButton::CMFCToolBarMenuButton

Construye un objeto `CMFCToolBarMenuButton`.

```
CMFCToolBarMenuButton();
CMFCToolBarMenuButton(const CMFCToolBarMenuButton& src);

CMFCToolBarMenuButton(
    UINT uiID,
    HMENU hMenu,
    int iImage,
    LPCTSTR lpszText=NULL,
    BOOL bUserButton=FALSE);
```

### <a name="parameters"></a>Parámetros

*src*<br/>
[in] Existente `CMFCToolBarMenuButton` objeto que se copiará en esto `CMFCToolBarMenuButton` objeto.

*uiID*<br/>
[in] El identificador del comando que se ejecutará cuando un usuario hace clic en el botón; o -1 (UINT) para un botón de menú que no ejecute un comando directamente.

*hMenu*<br/>
[in] Un identificador de un menú; o NULL si el botón no tiene un menú.

*iImage*<br/>
[in] Índice de la imagen del botón; o -1 si este botón no tiene un icono o utiliza el icono para el comando especificado por *uiID*. El índice es el mismo para cada `CMFCToolBarImages` objeto en la aplicación.

*lpszText*<br/>
[in] El texto del botón de menú de barra de herramientas.

*bUserButton*<br/>
[in] TRUE si el botón muestra una imagen definido por el usuario; FALSE si el botón muestra una imagen predefinida asociada con el comando especificado por *uiID*.

### <a name="remarks"></a>Comentarios

Si *uiID* sirve un identificador de comando, el botón realiza ese comando cuando el usuario hace clic en él. Si *hMenu* es un identificador válido de menú, el botón proporciona un menú desplegable cuando aparece en una barra de herramientas o un submenú cuando aparece en un menú. Si ambos *uiID* y *hMenu* son válidos, el botón es un botón de expansión con una parte que realizará el comando cuando el usuario hace clic en él y una parte con una flecha hacia abajo que se desplegable un menú cuando el usuario hace clic en él. Sin embargo, si *hMenu* es válido, un usuario no podrá hacer clic en el botón para ejecutar un comando cuando el botón se inserta en un menú.

### <a name="example"></a>Ejemplo

En el ejemplo siguiente se muestra cómo construir un objeto de la `CMFCToolBarMenuButton` clase. Este fragmento de código forma parte del [ejemplo de WordPad](../../visual-cpp-samples.md).

[!code-cpp[NVC_MFC_WordPad#9](../../mfc/reference/codesnippet/cpp/cmfctoolbarmenubutton-class_2.cpp)]

##  <a name="comparewith"></a>  CMFCToolBarMenuButton::CompareWith


```
virtual BOOL CompareWith(const CMFCToolBarButton& other) const;
```

### <a name="parameters"></a>Parámetros

[in] *otros*

### <a name="return-value"></a>Valor devuelto

### <a name="remarks"></a>Comentarios

##  <a name="copyfrom"></a>  Cmfctoolbarmenubutton:: CopyFrom


```
virtual void CopyFrom(const CMFCToolBarButton& src);
```

### <a name="parameters"></a>Parámetros

[in] *src*

### <a name="remarks"></a>Comentarios

##  <a name="createfrommenu"></a>  CMFCToolBarMenuButton::CreateFromMenu

Inicializa el menú de barra de herramientas desde un identificador de menú de Windows.

```
virtual void CreateFromMenu(HMENU hMenu);
```

### <a name="parameters"></a>Parámetros

*hMenu*<br/>
[in] Identificador de un menú.

### <a name="remarks"></a>Comentarios

Un botón de menú de la barra de herramientas puede mostrar un submenú de la lista desplegable.

El marco llama a este método para inicializar los comandos en el submenú en un menú.

##  <a name="createmenu"></a>  CMFCToolBarMenuButton::CreateMenu

Crea un menú que consta de los comandos en el menú de barra de herramientas. Devuelve un identificador para el menú.

```
virtual HMENU CreateMenu() const;
```

### <a name="return-value"></a>Valor devuelto

Un handle para el menú si correcto. Es NULL si la lista de comandos asociados con el botón de menú de la barra de herramientas está vacía.

### <a name="remarks"></a>Comentarios

Puede invalidar este método en una clase derivada para personalizar la forma en que se genera el menú.

##  <a name="createpopupmenu"></a>  Cmfctoolbarmenubutton:: CreatePopupMenu

Crea un `CMFCPopupMenu` objeto para mostrar el menú de barra de herramientas.

```
virtual CMFCPopupMenu* CreatePopupMenu();
```

### <a name="return-value"></a>Valor devuelto

Un puntero a un `CMFCPopupMenu` objeto que muestra el menú desplegable asociado con el botón de menú de la barra de herramientas.

### <a name="remarks"></a>Comentarios

Este método se llama el marco de trabajo para preparar la presentación del menú desplegable asociado con el botón.

La implementación predeterminada simplemente construye y devuelve un nuevo `CMFCPopupMenu` objeto. Invalide este método si desea usar un tipo derivado de [CMFCPopupMenu (clase)](cmfcpopupmenu-class.md) o para realizar la inicialización adicional.

##  <a name="drawdocumenticon"></a>  CMFCToolBarMenuButton::DrawDocumentIcon

Dibuja un icono de documento en el botón de menú.

```
void DrawDocumentIcon(
    CDC* pDC,
    const CRect& rectImage,
    HICON hIcon);
```

### <a name="parameters"></a>Parámetros

*pDC*<br/>
[in] Un puntero al contexto de dispositivo.

*rectImage*<br/>
[in] Coordenadas de la imagen del rectángulo delimitador.

*hIcon*<br/>
[in] Un identificador del icono.

### <a name="remarks"></a>Comentarios

Este método toma un icono de documento y lo dibuja en el botón de menú, centrado en el área especificada por *rectImage*.

##  <a name="enablequickcustomize"></a>  CMFCToolBarMenuButton::EnableQuickCustomize


```
void EnableQuickCustomize();
```

### <a name="remarks"></a>Comentarios

##  <a name="hasbutton"></a>  CMFCToolBarMenuButton::HasButton


```
virtual BOOL HasButton() const;
```

### <a name="return-value"></a>Valor devuelto

### <a name="remarks"></a>Comentarios

##  <a name="havehotborder"></a>  CMFCToolBarMenuButton::HaveHotBorder


```
virtual BOOL HaveHotBorder() const;
```

### <a name="return-value"></a>Valor devuelto

### <a name="remarks"></a>Comentarios

##  <a name="isborder"></a>  CMFCToolBarMenuButton::IsBorder


```
virtual BOOL IsBorder() const;
```

### <a name="return-value"></a>Valor devuelto

### <a name="remarks"></a>Comentarios

##  <a name="isclickedonmenu"></a>  CMFCToolBarMenuButton::IsClickedOnMenu


```
BOOL IsClickedOnMenu() const;
```

### <a name="return-value"></a>Valor devuelto

### <a name="remarks"></a>Comentarios

##  <a name="isquickmode"></a>  CMFCToolBarMenuButton::IsQuickMode


```
BOOL IsQuickMode();
```

### <a name="return-value"></a>Valor devuelto

### <a name="remarks"></a>Comentarios

##  <a name="getcommands"></a>  CMFCToolBarMenuButton::GetCommands

Proporciona acceso de solo lectura a la lista de comandos en el menú de barra de herramientas.

```
const CObList& GetCommands() const;
```

### <a name="return-value"></a>Valor devuelto

Una referencia constante a un [CObList (clase)](../../mfc/reference/coblist-class.md) objeto, que contiene una colección de [CMFCToolBarButton (clase)](../../mfc/reference/cmfctoolbarbutton-class.md) objetos.

### <a name="remarks"></a>Comentarios

Un botón de menú de la barra de herramientas puede mostrar un submenú. Puede proporcionar la lista de comandos en el submenú en el constructor o en [CMFCToolBarMenuButton::CreateFromMenu](#createfrommenu) como un identificador de un menú (HMENU). El menú se convierte en una lista de objetos que se derivan [CMFCToolBarButton (clase)](../../mfc/reference/cmfctoolbarbutton-class.md) y se almacenan en el interno `CObList` objeto. Puede tener acceso a esta lista mediante una llamada a este método.

##  <a name="getimagerect"></a>  CMFCToolBarMenuButton::GetImageRect

Recupera el rectángulo delimitador de la imagen del botón.

```
void GetImageRect(CRect& rectImage);
```

### <a name="parameters"></a>Parámetros

*rectImage*<br/>
[out] Una referencia a un `CRect` objeto que recibe las coordenadas de la imagen del rectángulo delimitador.

##  <a name="getpaletterows"></a>  CMFCToolBarMenuButton::GetPaletteRows

Devuelve el número de filas en el menú desplegable cuando el menú está en modo de paleta.

```
int GetPaletteRows() const;
```

### <a name="return-value"></a>Valor devuelto

El número de filas en la paleta.

### <a name="remarks"></a>Comentarios

Cuando el botón de menú se establece en modo de paleta, aparecerán los elementos de menú en varias columnas con solo un número limitado de filas. Llame a este método para obtener el número de filas. Puede habilitar o deshabilitar el modo de paleta y especifique el número de filas mediante [CMFCToolBarMenuButton::SetMenuPaletteMode](#setmenupalettemode).

##  <a name="getpopupmenu"></a>  CMFCToolBarMenuButton::GetPopupMenu

Devuelve un puntero a la [CMFCPopupMenu (clase)](../../mfc/reference/cmfcpopupmenu-class.md) objeto que representa el menú desplegable del botón.

```
CMFCPopupMenu* GetPopupMenu() const;
```

### <a name="return-value"></a>Valor devuelto

Un puntero a un [CMFCPopupMenu (clase)](../../mfc/reference/cmfcpopupmenu-class.md) objeto creado cuando el marco de trabajo ha dibujado el submenú del botón de menú de barra de herramientas; Es NULL si no se muestra ningún submenú.

### <a name="remarks"></a>Comentarios

Cuando un botón de menú de la barra de herramientas muestra un menú desplegable, el botón crea un [CMFCPopupMenu (clase)](../../mfc/reference/cmfcpopupmenu-class.md) objeto va a representar en el menú. Llame a este método para obtener un puntero a la `CMFCPopupMenu` objeto. No debería almacenar el puntero devuelto, ya que es temporal y deja de ser válida cuando el usuario cierra el menú desplegable.

##  <a name="isdroppeddown"></a>  CMFCToolBarMenuButton::IsDroppedDown

Indica si actualmente se muestra el menú emergente.

```
virtual BOOL IsDroppedDown() const;
```

### <a name="return-value"></a>Valor devuelto

TRUE si el botón de menú de la barra de herramientas muestra su submenú; en caso contrario, FALSE.

##  <a name="isemptymenuallowed"></a>  Cmfctoolbarmenubutton:: Isemptymenuallowed

Especifica si los elementos de menú muestra los submenús vacíos.

```
virtual BOOL IsEmptyMenuAllowed() const;
```

### <a name="return-value"></a>Valor devuelto

TRUE si el marco de trabajo abre un submenú del elemento de menú actualmente seleccionado incluso cuando el submenú está vacío; en caso contrario, FALSE.

### <a name="remarks"></a>Comentarios

El marco llama a este método cuando un usuario intenta abrir el submenú de elemento de menú actualmente seleccionado. Si el submenú está vacío y `IsEmptyMenuAllowed` devuelve FALSE, no se abre el submenú.

La implementación predeterminada devuelve FALSE. Invalide este método para personalizar este comportamiento.

##  <a name="isexclusive"></a>  CMFCToolBarMenuButton::IsExclusive

Indica si el botón está en modo exclusivo.

```
virtual BOOL IsExclusive() const;
```

### <a name="return-value"></a>Valor devuelto

TRUE si el botón está funcionando en modo exclusivo; en caso contrario, FALSE.

### <a name="remarks"></a>Comentarios

Cuando un usuario abre un menú emergente de un botón y, a continuación, mueve el puntero del mouse sobre otro botón de barra de herramientas o menú, se cierra el menú emergente, a menos que el botón está en modo exclusivo.

La implementación predeterminada siempre devuelve FALSE. Invalide este método en una clase derivada si desea activar el modo exclusivo.

##  <a name="ismenupalettemode"></a>  CMFCToolBarMenuButton::IsMenuPaletteMode

Determina si el menú desplegable está en modo de paleta.

```
BOOL IsMenuPaletteMode() const;
```

### <a name="return-value"></a>Valor devuelto

TRUE si el modo de paleta está habilitada, de lo contrario, FALSE.

### <a name="remarks"></a>Comentarios

Cuando el botón de menú se establece en modo de paleta, elementos de menú aparecen en varias columnas con solo un número limitado de filas. Llame a este método para obtener el número de filas. Puede habilitar o deshabilitar el modo de paleta mediante una llamada a [CMFCToolBarMenuButton::SetMenuPaletteMode](#setmenupalettemode).

##  <a name="istearoffmenu"></a>  CMFCToolBarMenuButton::IsTearOffMenu

Indica si el menú desplegable tiene una barra desplazable.

```
virtual BOOL IsTearOffMenu() const;
```

### <a name="return-value"></a>Valor devuelto

TRUE si el botón de menú de la barra de herramientas tiene una barra desplazable; en caso contrario, FALSE.

### <a name="remarks"></a>Comentarios

Para habilitar la característica desplazable y establecer las tiras barra ID, llame a [CMFCToolBarMenuButton::SetTearOff](#settearoff).

##  <a name="m_balwayscallownerdraw"></a>  CMFCToolBarMenuButton::m_bAlwaysCallOwnerDraw

Especifica si el marco de trabajo siempre se llama [CFrameWndEx::OnDrawMenuImage](../../mfc/reference/cframewndex-class.md#ondrawmenuimage) cuando se dibuja un botón.

```
static BOOL m_bAlwaysCallOwnerDraw;
```

### <a name="remarks"></a>Comentarios

Cuando esta variable de miembro se establece en TRUE, el botón siempre llama a [CFrameWndEx::OnDrawMenuImage](../../mfc/reference/cframewndex-class.md#ondrawmenuimage) método para mostrar la imagen en el botón. Cuando `m_bAlwaysCallOwnerDraw` es FALSE, el propio botón dibuja la imagen si la imagen está predefinida. De lo contrario, llama a `OnDrawMenuImage`.

##  <a name="onaftercreatepopupmenu"></a>  CMFCToolBarMenuButton::OnAfterCreatePopupMenu


```
virtual void OnAfterCreatePopupMenu();
```

### <a name="remarks"></a>Comentarios

##  <a name="onbeforedrag"></a>  CMFCToolBarMenuButton::OnBeforeDrag


```
virtual BOOL OnBeforeDrag() const;
```

### <a name="return-value"></a>Valor devuelto

### <a name="remarks"></a>Comentarios

##  <a name="oncalculatesize"></a>  CMFCToolBarMenuButton::OnCalculateSize


```
virtual SIZE OnCalculateSize(
    CDC* pDC,
    const CSize& sizeDefault,
    BOOL bHorz);
```

### <a name="parameters"></a>Parámetros

*pDC*<br/>
[in] [in] *sizeDefault* [in] *bHorz*

### <a name="return-value"></a>Valor devuelto

### <a name="remarks"></a>Comentarios

##  <a name="oncancelmode"></a>  CMFCToolBarMenuButton::OnCancelMode


```
virtual void OnCancelMode();
```

### <a name="remarks"></a>Comentarios

##  <a name="onchangeparentwnd"></a>  CMFCToolBarMenuButton::OnChangeParentWnd


```
virtual void OnChangeParentWnd(CWnd* pWndParent);
```

### <a name="parameters"></a>Parámetros

[in] *pWndParent*

### <a name="remarks"></a>Comentarios

##  <a name="onclick"></a>  CMFCToolBarMenuButton::OnClick


```
virtual BOOL OnClick(
    CWnd* pWnd,
    BOOL bDelay = TRUE);
```

### <a name="parameters"></a>Parámetros

*conquistado*<br/>
[in] [in] *bDelay*

### <a name="return-value"></a>Valor devuelto

### <a name="remarks"></a>Comentarios

##  <a name="onclickmenuitem"></a>  CMFCToolBarMenuButton::OnClickMenuItem

Lo llama el marco cuando el usuario selecciona un elemento en el menú desplegable.

```
virtual BOOL OnClickMenuItem();
```

### <a name="return-value"></a>Valor devuelto

FALSE si el marco de trabajo debe continuar el menú predeterminado elemento procesamiento; en caso contrario, TRUE. La implementación predeterminada siempre devuelve FALSE.

### <a name="remarks"></a>Comentarios

Cuando el usuario hace clic en un elemento de menú, el marco de trabajo ejecuta un comando que está asociado con ese elemento.

Para personalizar el procesamiento del elemento de menú, invalidar `OnClickMenuItem` en una clase derivada de `CMFCToolBarMenuButton` clase. También debe invalidar [CFrameWndEx::OnShowPopupMenu](../../mfc/reference/cframewndex-class.md#onshowpopupmenu) y reemplace los botones de menú que requieren un procesamiento especial con instancias de la clase derivada.

##  <a name="oncontexthelp"></a>  CMFCToolBarMenuButton::OnContextHelp


```
virtual BOOL OnContextHelp(CWnd* pWnd);
```

### <a name="parameters"></a>Parámetros

[in] *conquistado*

### <a name="return-value"></a>Valor devuelto

### <a name="remarks"></a>Comentarios

##  <a name="ondraw"></a>  CMFCToolBarMenuButton::OnDraw


```
virtual void OnDraw(
    CDC* pDC,
    const CRect& rect,
    CMFCToolBarImages* pImages,
    BOOL bHorz = TRUE,
    BOOL bCustomizeMode = FALSE,
    BOOL bHighlight = FALSE,
    BOOL bDrawBorder = TRUE,
    BOOL bGrayDisabledButtons = TRUE);
```

### <a name="parameters"></a>Parámetros

*pDC*<br/>
[in] [in] *rect*
*pImages*<br/>
[in] [in] *bHorz*
*bCustomizeMode*<br/>
[in] [in] *bHighlight*
*bDrawBorder*<br/>
[in] [in] *bGrayDisabledButtons*

### <a name="remarks"></a>Comentarios

##  <a name="ondrawoncustomizelist"></a>  CMFCToolBarMenuButton::OnDrawOnCustomizeList


```
virtual int OnDrawOnCustomizeList(
    CDC* pDC,
    const CRect& rect,
    BOOL bSelected);
```

### <a name="parameters"></a>Parámetros

*pDC*<br/>
[in] [in] *rect* [in] *bSelected*

### <a name="return-value"></a>Valor devuelto

### <a name="remarks"></a>Comentarios

##  <a name="openpopupmenu"></a>  CMFCToolBarMenuButton::OpenPopupMenu

Lo llama el marco cuando el usuario abre el menú desplegable de un botón de menú de la barra de herramientas.

```
virtual BOOL OpenPopupMenu(CWnd* pWnd=NULL);
```

### <a name="parameters"></a>Parámetros

*conquistado*<br/>
[in] Especifica la ventana que recibe los comandos de menú desplegable. Puede ser NULL solo si el botón de menú de la barra de herramientas tiene una ventana primaria.

### <a name="return-value"></a>Valor devuelto

TRUE si un [CMFCPopupMenu (clase)](../../mfc/reference/cmfcpopupmenu-class.md) objeto se creó y se abrió correctamente; en caso contrario, FALSE.

### <a name="remarks"></a>Comentarios

Esta función se llama el marco de trabajo cuando el usuario abre un menú desplegable de un botón de menú de la barra de herramientas.

##  <a name="resetimagetodefault"></a>  CMFCToolBarMenuButton::ResetImageToDefault


```
virtual void ResetImageToDefault();
```

### <a name="remarks"></a>Comentarios

##  <a name="savebarstate"></a>  CMFCToolBarMenuButton::SaveBarState


```
virtual void SaveBarState();
```

### <a name="remarks"></a>Comentarios

El marco llama a este método cuando crea un botón de barra de herramientas como el resultado de una operación de arrastrar y colocar. Este método llama a la [CMFCPopupMenu::SaveState](../../mfc/reference/cmfcpopupmenu-class.md#savestate) método para el menú emergente de nivel superior, lo que hace que el botón primario del menú emergente para volver a crear su menú.

##  <a name="serialize"></a>  CMFCToolBarMenuButton::Serialize


```
virtual void Serialize(CArchive& ar);
```

### <a name="parameters"></a>Parámetros

[in] *ar*

### <a name="remarks"></a>Comentarios

##  <a name="setaccdata"></a>  CMFCToolBarMenuButton::SetACCData

Establece los datos de accesibilidad para el elemento de la cinta de opciones.

```
virtual BOOL SetACCData(
    CWnd* pParent,
    CAccessibilityData& data);
```

### <a name="parameters"></a>Parámetros

*pParent*<br/>
La ventana principal para el elemento de la cinta de opciones.

*data*<br/>
Los datos de accesibilidad para el elemento de la cinta de opciones.

### <a name="return-value"></a>Valor devuelto

Siempre devuelve TRUE.

### <a name="remarks"></a>Comentarios

De forma predeterminada, este método establece los datos de accesibilidad para el elemento de la cinta de opciones y siempre devuelve TRUE. Invalide este método para establecer los datos de accesibilidad y devolver un valor que indique éxito o error.

##  <a name="setmenuonly"></a>  CMFCToolBarMenuButton::SetMenuOnly

Especifica si el botón se dibuja como un botón de menú o un botón de expansión cuando tiene un identificador de comando válido y un submenú.

```
void SetMenuOnly(BOOL bMenuOnly);
```

### <a name="parameters"></a>Parámetros

*bMenuOnly*<br/>
[in] TRUE para mostrar este botón como un botón de menú cuando tiene un identificador de comando válido y un submenú, FALSE para mostrar este botón como un botón de expansión cuando tiene un identificador de comando válido y un submenú.

### <a name="remarks"></a>Comentarios

Normalmente, cuando un botón de menú de la barra de herramientas tiene un submenú y un identificador de comando, el menú aparece como un botón de expansión que tiene un botón principal y un botón de flecha abajo. Si se llama a este método y *bMenuOnly* es TRUE, el botón en su lugar aparece como un botón de menú único con una flecha hacia abajo en el botón. Cuando el usuario hace clic en la flecha en cualquier modo, se abre el submenú y, cuando el usuario hace clic en la parte no flecha abajo del botón en cualquier modo, el marco ejecuta el comando.

##  <a name="setmenupalettemode"></a>  CMFCToolBarMenuButton::SetMenuPaletteMode

Especifica si el menú desplegable está en modo de paleta.

```
void SetMenuPaletteMode(
    BOOL bMenuPaletteMode=TRUE,
    int nPaletteRows=1);
```

### <a name="parameters"></a>Parámetros

*bMenuPaletteMode*<br/>
[in] Especifica si el menú desplegable está en modo de paleta.

*nPaletteRows*<br/>
[in] Número de filas en la paleta.

### <a name="remarks"></a>Comentarios

En el modo de paleta, se muestran todos los elementos de menú como una paleta de varias columnas. Especificar el número de filas mediante *nPaletteRows*.

##  <a name="setmessagewnd"></a>  CMFCToolBarMenuButton::SetMessageWnd


```
void SetMessageWnd(CWnd* pWndMessage);
```

### <a name="parameters"></a>Parámetros

[in] *pWndMessage*

### <a name="remarks"></a>Comentarios

##  <a name="setradio"></a>  CMFCToolBarMenuButton::SetRadio

Establece el botón de menú de la barra de herramientas para mostrar un icono de estilo de botón de radio cuando se activa.

```
virtual void SetRadio();
```

### <a name="remarks"></a>Comentarios

Cuando se dibuja el botón de menú si está desprotegido, llama a [CMFCVisualManager::OnDrawMenuCheck](../../mfc/reference/cmfcvisualmanager-class.md#ondrawmenucheck) para dibujar un icono de marca de verificación. De forma predeterminada, `OnDrawMenuCheck` las solicitudes que el administrador visual actual dibuja una casilla de verificación estilo marca de verificación en el botón de menú. Después de llamar a este método, el administrador visual actual en su lugar dibuja una marca de verificación de estilo de botón de radio en el botón de menú. No se puede deshacer este cambio.

Cuando se llama a este método y el botón de menú se muestra actualmente, se actualizará.

##  <a name="settearoff"></a>  CMFCToolBarMenuButton::SetTearOff

Especifica el identificador de la barra desplazable para el menú desplegable.

```
virtual void SetTearOff(UINT uiBarID);
```

### <a name="parameters"></a>Parámetros

*uiBarID*<br/>
[in] Especifica un nuevo desplazable Id. de barra

### <a name="remarks"></a>Comentarios

Llame a este método para especificar el identificador de la barra desplazable que se crea cuando el usuario arrastra el botón de menú fuera de una barra de menús. Si el *uiBarID* parámetro es 0, el usuario no puede arrancar en el botón de menú.

Llame a [CWinAppEx::EnableTearOffMenus](../../mfc/reference/cwinappex-class.md#enabletearoffmenus) para habilitar la característica de menú desplazable en la aplicación.

## <a name="see-also"></a>Vea también

[Gráfico de jerarquías](../../mfc/hierarchy-chart.md)<br/>
[Clases](../../mfc/reference/mfc-classes.md)<br/>
[CMFCToolBarButton (clase)](../../mfc/reference/cmfctoolbarbutton-class.md)<br/>
[CMFCToolBar (clase)](../../mfc/reference/cmfctoolbar-class.md)<br/>
[CMFCPopupMenu (clase)](../../mfc/reference/cmfcpopupmenu-class.md)